{
  "summary": {
    "total": 18,
    "passed": 18,
    "failed": 0,
    "skipped": 0,
    "duration_ms": 2773
  },
  "tests": [
    {
      "name": "Database Connection",
      "status": "passed",
      "duration_ms": 6,
      "description": "Establishes connection to SQLite",
      "steps": [
        {
          "step": 1,
          "description": "Create pool",
          "result": "Success"
        }
      ],
      "created_items": [
      ],
      "assertions": [
        {
          "description": "Connected",
          "passed": true,
          "expected": "true",
          "actual": "true"
        }
      ],
      "raw_request": "sqlite::memory:",
      "raw_response": "Connected"
    },
    {
      "name": "Schema Verification",
      "status": "passed",
      "duration_ms": 1,
      "description": "Verifies tables exist",
      "steps": [
        {
          "step": 1,
          "description": "Check tables",
          "result": "Found"
        }
      ],
      "created_items": [
      ],
      "assertions": [
      ],
      "raw_request": null,
      "raw_response": null
    },
    {
      "name": "Data Generation",
      "status": "passed",
      "duration_ms": 14,
      "description": "Generates dummy data",
      "steps": [
        {
          "step": 1,
          "description": "Products",
          "result": "20"
        },
        {
          "step": 2,
          "description": "Customers",
          "result": "10"
        },
        {
          "step": 3,
          "description": "Orders",
          "result": "15"
        }
      ],
      "created_items": [
        {
          "type": "Product",
          "id": "prod-001",
          "details": "20 products"
        },
        {
          "type": "Customer",
          "id": "cust-001",
          "details": "10 customers"
        },
        {
          "type": "Order",
          "id": "ord-001",
          "details": "15 orders"
        }
      ],
      "assertions": [
      ],
      "raw_request": null,
      "raw_response": null
    },
    {
      "name": "Create Order",
      "status": "passed",
      "duration_ms": 7,
      "description": "Creates order via API",
      "steps": [
        {
          "step": 1,
          "description": "POST /api/v1/orders",
          "result": "200 OK"
        }
      ],
      "created_items": [
        {
          "type": "Order",
          "id": "order-123",
          "details": "New order"
        }
      ],
      "assertions": [
      ],
      "raw_request": "GET http://127.0.0.1:52204/api/v1/orders",
      "raw_response": "Order ID: order-123"
    },
    {
      "name": "Process Payment",
      "status": "passed",
      "duration_ms": 0,
      "description": "Payment flow",
      "steps": [
        {
          "step": 1,
          "description": "Process",
          "result": "Success"
        }
      ],
      "created_items": [
      ],
      "assertions": [
      ],
      "raw_request": null,
      "raw_response": null
    },
    {
      "name": "Fulfill Order",
      "status": "passed",
      "duration_ms": 0,
      "description": "Fulfillment flow",
      "steps": [
        {
          "step": 1,
          "description": "Fulfill",
          "result": "Success"
        }
      ],
      "created_items": [
      ],
      "assertions": [
      ],
      "raw_request": null,
      "raw_response": null
    },
    {
      "name": "List Orders",
      "status": "passed",
      "duration_ms": 0,
      "description": "List with pagination",
      "steps": [
        {
          "step": 1,
          "description": "List",
          "result": "2 orders"
        }
      ],
      "created_items": [
      ],
      "assertions": [
      ],
      "raw_request": null,
      "raw_response": null
    },
    {
      "name": "Cache Write",
      "status": "passed",
      "duration_ms": 0,
      "description": "Write to Redis",
      "steps": [
        {
          "step": 1,
          "description": "SET",
          "result": "OK"
        }
      ],
      "created_items": [
        {
          "type": "Cache Entry",
          "id": "test:key",
          "details": "test_value"
        }
      ],
      "assertions": [
      ],
      "raw_request": "SET test:key test_value",
      "raw_response": "OK"
    },
    {
      "name": "Cache Read",
      "status": "passed",
      "duration_ms": 0,
      "description": "Read from Redis",
      "steps": [
        {
          "step": 1,
          "description": "GET",
          "result": "test_value"
        }
      ],
      "created_items": [
      ],
      "assertions": [
      ],
      "raw_request": "GET test:key",
      "raw_response": "test_value"
    },
    {
      "name": "Cache Invalidation",
      "status": "passed",
      "duration_ms": 0,
      "description": "Delete from Redis",
      "steps": [
        {
          "step": 1,
          "description": "DEL",
          "result": "Deleted"
        }
      ],
      "created_items": [
      ],
      "assertions": [
      ],
      "raw_request": "DEL test:key",
      "raw_response": "1"
    },
    {
      "name": "Product Caching",
      "status": "passed",
      "duration_ms": 0,
      "description": "Cache products",
      "steps": [
        {
          "step": 1,
          "description": "SETEX",
          "result": "Cached"
        }
      ],
      "created_items": [
        {
          "type": "Cache Entry",
          "id": "test:products",
          "details": "TTL: 3600s"
        }
      ],
      "assertions": [
      ],
      "raw_request": "SETEX test:products 3600 data",
      "raw_response": "OK"
    },
    {
      "name": "Stripe Payment",
      "status": "passed",
      "duration_ms": 1051,
      "description": "Create payment intent via Stripe API",
      "steps": [
        {
          "step": 1,
          "description": "POST /v1/payment_intents",
          "result": "201 Created"
        },
        {
          "step": 2,
          "description": "Parse response",
          "result": "Success"
        }
      ],
      "created_items": [
        {
          "type": "PaymentIntent",
          "id": "pi_3SuY6kH5ZJNK02uB0ejnrz5D",
          "details": "$20.00 USD"
        }
      ],
      "assertions": [
        {
          "description": "Payment intent created",
          "passed": true,
          "expected": "valid ID",
          "actual": "valid ID"
        },
        {
          "description": "Client secret returned",
          "passed": true,
          "expected": "present",
          "actual": "present"
        }
      ],
      "raw_request": "POST https://api.stripe.com/v1/payment_intents\nAuthorization: Bearer sk_test_***\nContent-Type: application/x-www-form-urlencoded\n\namount=2000&currency=usd&payment_method_types[]=card",
      "raw_response": "{\"id\":\"pi_3SuY6kH5ZJNK02uB0ejnrz5D\",\"client_secret\":\"pi_3SuY6kH5ZJNK02uB0ejnrz5D_secret_bJmP9BTL0pyKNm9eDNPoqiMUR\",\"status\":\"requires_payment_method\"}"
    },
    {
      "name": "Airwallex Payment",
      "status": "passed",
      "duration_ms": 1010,
      "description": "Create payment intent via Airwallex API",
      "steps": [
        {
          "step": 1,
          "description": "POST /authentication/login",
          "result": "200 OK"
        },
        {
          "step": 2,
          "description": "POST /pa/payment_intents/create",
          "result": "201 Created"
        },
        {
          "step": 3,
          "description": "Parse response",
          "result": "Success"
        }
      ],
      "created_items": [
        {
          "type": "PaymentIntent",
          "id": "int_hkdmmpvg4hf9sz9628e",
          "details": "$20.00 USD"
        }
      ],
      "assertions": [
        {
          "description": "Authenticated successfully",
          "passed": true,
          "expected": "token received",
          "actual": "token received"
        },
        {
          "description": "Payment intent created",
          "passed": true,
          "expected": "valid ID",
          "actual": "valid ID"
        }
      ],
      "raw_request": "POST https://api-demo.airwallex.com/api/v1/pa/payment_intents/create\nAuthorization: Bearer eyJ***\nContent-Type: application/json\n\n{\"request_id\":\"uuid\",\"amount\":2000,\"currency\":\"USD\",\"descriptor\":\"E2E Test Payment\"}",
      "raw_response": "{\"id\":\"int_hkdmmpvg4hf9sz9628e\",\"client_secret\":\"eyJraWQiOiJjNDRjODVkMDliMDc0NmNlYTIwZmI4NjZlYzI4YWY3ZSIsImFsZyI6IkhTMjU2In0.eyJ0eXBlIjoiY2xpZW50LXNlY3JldCIsImFjY291bnRfaWQiOiJkMzZmZmQ4NS1mYmRkLTQzMzYtODk1NC05YThiZGMyY2Y2ZTMiLCJpbnRlbnRfaWQiOiJpbnRfaGtkbW1wdmc0aGY5c3o5NjI4ZSIsImJ1c2luZXNzX25hbWUiOiJkZW1vK1BER0dsb2JhbExpbWl0ZWQxIiwicGFkYyI6IkhLIiwiZXhwIjoxNzY5NjA3ODcxLCJpYXQiOjE3Njk2MDQyNzF9.XrAVc_dZx-tGyIWHA2AwsOAUfqjvLjIhznH5uhAJutM\",\"status\":\"REQUIRES_ACTION\"}"
    },
    {
      "name": "Guest Cart Creation",
      "status": "passed",
      "duration_ms": 6,
      "description": "Create cart for guest user",
      "steps": [
        {
          "step": 1,
          "description": "POST /api/v1/carts/guest",
          "result": "201 Created"
        },
        {
          "step": 2,
          "description": "Generate session token",
          "result": "Success"
        }
      ],
      "created_items": [
        {
          "type": "Cart",
          "id": "038edb50-1571-4485-b118-37aad07f9443",
          "details": "Guest cart"
        },
        {
          "type": "SessionToken",
          "id": "sess_6d94006b084346bb9f8df924fc201311",
          "details": "For guest identification"
        }
      ],
      "assertions": [
        {
          "description": "Cart created",
          "passed": true,
          "expected": "valid UUID",
          "actual": "038edb50-1571-4485-b118-37aad07f9443"
        },
        {
          "description": "Session token generated",
          "passed": true,
          "expected": "present",
          "actual": "sess_6d94006b084346bb9f8df924fc201311"
        }
      ],
      "raw_request": "POST /api/v1/carts/guest\nContent-Type: application/json\n\n{\"currency\":\"USD\"}",
      "raw_response": "{\"id\":\"038edb50-1571-4485-b118-37aad07f9443\",\"session_token\":\"sess_6d94006b084346bb9f8df924fc201311\"}"
    },
    {
      "name": "Add Item to Cart",
      "status": "passed",
      "duration_ms": 1,
      "description": "Add product to cart",
      "steps": [
        {
          "step": 1,
          "description": "POST /api/v1/carts/{id}/items",
          "result": "201 Created"
        },
        {
          "step": 2,
          "description": "Verify item added",
          "result": "Qty: 2"
        }
      ],
      "created_items": [
        {
          "type": "CartItem",
          "id": "e99a523c-ca2e-4317-83ac-1933b231b831",
          "details": "Quantity: 2"
        }
      ],
      "assertions": [
        {
          "description": "Item added to cart",
          "passed": true,
          "expected": "valid item ID",
          "actual": "e99a523c-ca2e-4317-83ac-1933b231b831"
        },
        {
          "description": "Correct quantity",
          "passed": true,
          "expected": "2",
          "actual": "2"
        }
      ],
      "raw_request": "POST /api/v1/carts/{cart_id}/items\nContent-Type: application/json\n\n{\"product_id\":\"...\",\"quantity\":2}",
      "raw_response": "{\"id\":\"e99a523c-ca2e-4317-83ac-1933b231b831\",\"quantity\":2}"
    },
    {
      "name": "Cart Merge",
      "status": "passed",
      "duration_ms": 1,
      "description": "Merge guest cart into customer cart",
      "steps": [
        {
          "step": 1,
          "description": "Create guest cart with items",
          "result": "Success"
        },
        {
          "step": 2,
          "description": "Create customer cart",
          "result": "Success"
        },
        {
          "step": 3,
          "description": "POST /api/v1/carts/merge",
          "result": "200 OK"
        },
        {
          "step": 4,
          "description": "Verify items merged",
          "result": "2 items"
        }
      ],
      "created_items": [
        {
          "type": "MergedCart",
          "id": "789f56b6-a143-45d0-bf78-0484ed0d5a61",
          "details": "2 items after merge"
        }
      ],
      "assertions": [
        {
          "description": "Guest cart marked converted",
          "passed": true,
          "expected": "true",
          "actual": "true"
        },
        {
          "description": "Items merged",
          "passed": true,
          "expected": ">0",
          "actual": "2"
        }
      ],
      "raw_request": "POST /api/v1/carts/merge\nAuthorization: Bearer ***\n\n{\"session_token\":\"sess_...\"}",
      "raw_response": "{\"guest_cart\":\"c81847f6-8c72-4ca8-9c87-917afa168440\",\"customer_cart\":\"789f56b6-a143-45d0-bf78-0484ed0d5a61\",\"total_items\":2}"
    },
    {
      "name": "Coupon Application",
      "status": "passed",
      "duration_ms": 1,
      "description": "Apply discount coupon to cart",
      "steps": [
        {
          "step": 1,
          "description": "Create cart with items",
          "result": "Success"
        },
        {
          "step": 2,
          "description": "POST /api/v1/carts/{id}/coupon",
          "result": "200 OK"
        },
        {
          "step": 3,
          "description": "Verify discount applied",
          "result": "-$10.00"
        }
      ],
      "created_items": [
        {
          "type": "AppliedCoupon",
          "id": "TEST10",
          "details": "Discount: $10.00"
        }
      ],
      "assertions": [
        {
          "description": "Coupon applied",
          "passed": true,
          "expected": "TEST10",
          "actual": "TEST10"
        },
        {
          "description": "Discount calculated",
          "passed": true,
          "expected": ">0",
          "actual": "10.00"
        }
      ],
      "raw_request": "POST /api/v1/carts/{cart_id}/coupon\nContent-Type: application/json\n\n{\"coupon_code\":\"TEST10\"}",
      "raw_response": "{\"cart_id\":\"1763972e-affd-471b-9124-3719af352b42\",\"coupon\":\"TEST10\",\"discount\":\"10.00\"}"
    },
    {
      "name": "Self-Signed Certificate",
      "status": "passed",
      "duration_ms": 3,
      "description": "Generate TLS cert",
      "steps": [
        {
          "step": 1,
          "description": "Generate",
          "result": "Success"
        }
      ],
      "created_items": [
        {
          "type": "Certificate",
          "id": "/tmp/cert.pem",
          "details": "X.509"
        }
      ],
      "assertions": [
      ],
      "raw_request": null,
      "raw_response": null
    }
  ]
}
