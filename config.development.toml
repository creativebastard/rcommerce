# R Commerce Development Configuration
# ====================================
# Minimal configuration for local development
# Copy this to config.toml for quick local setup

[server]
host = "127.0.0.1"
port = 8080
worker_threads = 2

[server.cors]
# Allow all origins in development (NEVER do this in production!)
allowed_origins = ["*"]
allowed_methods = ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"]
# Note: When using "*" for origins with credentials, browsers will reject the request.
# For development with credentials, you may need to specify exact origins.
allowed_headers = ["Content-Type", "Authorization", "X-Requested-With"]
allow_credentials = false

[database]
# Database type: PostgreSQL (the only supported database)
db_type = "Postgres"
host = "localhost"
port = 5432
database = "rcommerce"
username = "rcommerce"
password = "password"
pool_size = 5
log_queries = true
log_slow_queries = 100

[cache]
# Cache type: Memory or Redis
cache_type = "Memory"

# Maximum cache size in MB (for memory cache)
max_size_mb = 50

# Redis connection URL (required when cache_type = "Redis")
# redis_url = "redis://localhost:6379"

# Redis connection pool size
# redis_pool_size = 10

# TLS Configuration (disabled by default for development)
[tls]
# TLS is disabled in development to simplify local testing
enabled = false
min_tls_version = "1.3"
max_tls_version = "1.3"
ocsp_stapling = false

# Let's Encrypt configuration for development
# Uses staging server to avoid rate limits during testing
[tls.lets_encrypt]
enabled = false
email = "dev@example.com"
domains = ["localhost"]
# Always use staging server in development to avoid rate limits
use_staging = true
auto_renew = false

# HSTS configuration (disabled in development)
[tls.hsts]
enabled = false
max_age = 31536000
include_subdomains = true
preload = false

[security]
force_https = false

[security.jwt]
# Development secret (change in production!)
secret = "dev-secret-do-not-use-in-production-change-this-to-a-random-string"
expiry_hours = 24

[security.rate_limit]
# Relaxed rate limits for development
enabled = true
requests_per_minute = 1000
auth_requests_per_minute = 100

[payment]
test_mode = true
default_gateway = "stripe"
auto_capture = true

[payment.stripe]
enabled = true
# Use Stripe test keys
secret_key = "sk_test_your_test_key_here"
publishable_key = "pk_test_your_test_key_here"
webhook_secret = "whsec_your_webhook_secret_here"

[storage]
type = "Local"

[storage.local]
upload_dir = "./uploads"
base_url = "/uploads"

[logging]
level = "debug"
format = "Text"

[features]
debug_api = true
metrics = true
health_check = true
